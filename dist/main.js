(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._form=n,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector))}var n,r;return n=t,(r=[{key:"_showError",value:function(e,t){var n=this._form.querySelector("#".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),n.textContent=t,n.classList.add(this._errorClass)}},{key:"_hideError",value:function(e){var t=this._form.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"toggleButtonError",value:function(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"_checkIfInputValid",value:function(e){e.validity.valid?this._hideError(e):(this._showError(e,e.validationMessage),this._buttonElement.classList.add(this._inactiveButtonClass))}},{key:"_setInputListners",value:function(){var e=this;this.toggleButtonError(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkIfInputValid(t),e.toggleButtonError()}))}))}},{key:"enableValidation",value:function(){this._form.addEventListener("submit",(function(e){e.preventDefault()})),this._setInputListners()}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(){function e(t,n,o,i,a){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"_deleteCard",(function(){s._element.remove()})),r(this,"_likeBt",(function(){s._like.classList.toggle("cards__like_active")})),this._selector=t,this._name=n,this._link=o,this._alt=i,this._handleCard=a}var t,o;return t=e,(o=[{key:"_getItem",value:function(){return document.querySelector(this._selector).content.querySelector(".cards__item").cloneNode(!0)}},{key:"getView",value:function(){return this._element=this._getItem(),this._like=this._element.querySelector(".cards__like"),this._cardImage=this._element.querySelector(".cards__image"),this._element.querySelector(".cards__title").textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._alt,this._setEventListeners(),this._element}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".cards__delete").addEventListener("click",this._deleteCard),this._like.addEventListener("click",this._likeBt),this._cardImage.addEventListener("click",(function(){e._handleCard(e._name,e._link,e._alt)}))}}])&&n(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a,s,l=document.querySelector(".popup_type_bigimage"),u=document.querySelector(".popup_type_user-info"),c=document.querySelector(".profile"),d=c.querySelector(".profile__edit-button"),_=c.querySelector(".profile__name"),p=c.querySelector(".profile__description"),m=document.querySelector("#name"),f=document.querySelector("#job"),v=(document.querySelector(".form__buttonsave_type_save"),document.querySelector(".popup__container")),y=document.querySelector(".cards"),h=c.querySelector(".profile__addbutton"),b=document.querySelector(".popup_type_new-card"),k=b.querySelector(".form"),S=document.querySelector("#title"),g=document.querySelector("#link"),E=(document.querySelector(".form__buttonsave_type_create"),l.querySelector(".popup__imagetitle")),q=l.querySelector(".popup__bigimage"),L=document.querySelectorAll(".popup"),C=document.querySelector("#form-edit"),w=document.querySelector("#form-add"),I=document.getElementById("overlay__profile"),B=document.getElementById("overlay__card"),j=document.getElementById("overlay__img"),x={inputSelector:".form__data",submitButtonSelector:".form__buttonsave",inactiveButtonClass:"form__buttonsave_disabled",inputErrorClass:"form__data_type_error",errorClass:"popup__error_visible"},A=new t(x,w),O=new t(x,C);function V(e){return new o(".template",e.name,e.link,e.alt,P).getView()}function P(e,t,n){D(l),q.src=t,E.textContent=e,q.alt=n}function D(e){e.classList.add("popup_opened"),document.addEventListener("keydown",T)}function T(e){"Escape"===e.key&&M(document.querySelector(".popup_opened"))}function M(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",T)}A.enableValidation(),O.enableValidation(),v.addEventListener("submit",(function(e){e.preventDefault(),_.textContent=m.value,p.textContent=f.value,M(u)})),k.addEventListener("submit",(function(e){e.preventDefault();var t={name:S.value,link:g.value};y.prepend(V(t)),S.value="",g.value="",M(b)})),a=[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].map((function(e){return V(e)})),y.append.apply(y,function(e){if(Array.isArray(e))return i(e)}(s=a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(s)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),L.forEach((function(e){e.querySelector(".popup__closebutton").addEventListener("click",(function(){return M(e)}))})),d.addEventListener("click",(function(){return e=u,m.value=_.textContent,f.value=p.textContent,void D(e);var e})),h.addEventListener("click",(function(){D(b),A.toggleButtonError()})),B.addEventListener("click",(function(){return M(b)})),I.addEventListener("click",(function(){return M(u)})),j.addEventListener("click",(function(){return M(l)}))})();